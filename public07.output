% 
% mkfs

% mkdir d1

% mkdir d2

% mkdir d3

% touch f1

% touch f2

% touch f3

% rm d2

% rm f2

% ls
d1/
d3/
f1
f3

% rmfs

% exit

% 

Looks like simulate() does not have any memory leaks.
