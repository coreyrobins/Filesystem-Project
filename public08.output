% 
% mkfs

% mkdir d1

% mkdir d2

% mkdir d3

% touch f1

% touch f2

% touch f3

% rm d1

% rm f1

% ls
d2/
d3/
f2
f3

% rmfs

% exit

% 

Looks like simulate() does not have any memory leaks.
